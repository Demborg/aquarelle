<!DOCTYPE html>
<html>
  <style>
    body {
      margin: 0px;
    }
    canvas {
      width: 100%;
    }
  </style>
  <script>
    const POLYGON = [[300, 300], [700, 300], [700, 700], [300, 700]]

    const drawPolygon = (ctx, points) => {
        ctx.moveTo(points[0][0], points[0][1])
        points.forEach(element => {
            ctx.lineTo(element[0], element[1])
        });
        ctx.closePath()
        ctx.fill()
    }

    const randomOffset = (scale) => {
        return scale * (2 * Math.random() - 1)
    }

    const randomVector = (scale) => {
        return [randomOffset(scale), randomOffset(scale)]
    }

    const add = (a, b) => {
        return [a[0] + b[0], a[1] + b[1]]
    }
    
    const scale = (v, s) => {
        return [v[0] * s, v[1] * s]
    }

    const randomizePolygon = (points, scale) => {
        return points.map(p => add(p, randomVector(scale)))
    }

    const subdivide = (points) => {
        return Array.from({length: points.length * 2}, (_, x) => {
            const i = Math.floor((x + 1) / 2) % points.length
            const j = Math.round((x + 1) / 2) % points.length
            return scale(add(points[i], points[j]), 0.5)
        })
    }

    const randomDeform = (points, scale) => {
        points = subdivide(points)
        return randomizePolygon(points, scale)
    }

    const fractalRandomDeform = (points, iterations, scale, falloff) => {
        for (let i = 0; i <= iterations; i++) {
            points = randomDeform(points, scale / Math.pow(falloff, i))
        }
        return points
    }

    window.onload = () => {
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        ctx.fillStyle = "rgba(22,38,76,0.05)"

        base = fractalRandomDeform(POLYGON, 3, 40, 1.3)
        for (let i = 0; i <= 40; i++) {
            shape = fractalRandomDeform(base, 3, 20, 1.3)
            drawPolygon(ctx, shape)
        }
    };
  </script>
  <canvas id="canvas" width="1000" , height="1000"></canvas>
</html>